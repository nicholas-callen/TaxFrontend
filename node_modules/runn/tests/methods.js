'use strict';

var methods = { foo: 'bar' };

var assert = require('chai').assert,
	undef = require('../lib/methods.js')(methods);
	
describe('methods', function(){
	it('exists', function(){
		assert.ok(methods);
		assert.ok(methods.before);
		assert.ok(methods.after);
		assert.ok(methods.middle);
	});

	describe('methods#before()', function(){
		it('adds before methods', function(){
			methods.before(function(data, next){
				next();
			});
			assert.ok(methods);
			assert.equal(1, methods.beforestack.length);
		});
	});

	describe('methods#middle()', function(){
		it('adds middle methods', function(){
			methods.middle(function(data, next){
				next();
			}, function(data, next){
				next();
			});
			assert.ok(methods);
			assert.equal(2, methods.middlestack.length);
		});
	});

	describe('methods#after()', function(){
		it('adds after methods', function(){
			methods.after(function(data, next){
				next();
			});
			assert.ok(methods);
			assert.equal(1, methods.afterstack.length);
		});
	});
});
